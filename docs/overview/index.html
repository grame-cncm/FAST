<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Overview - FAST ANR Project</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/fontawesome.min.css" rel="stylesheet">
        <link href="../css/brands.min.css" rel="stylesheet">
        <link href="../css/solid.min.css" rel="stylesheet">
        <link href="../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <link href="../custom.css" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="..">FAST ANR Project</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href="./" class="nav-link active" aria-current="page">Overview</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Results</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../results/" class="dropdown-item">Practical Results</a>
</li>
                                    
<li>
    <a href="https://anr.hal.science/search/index/?q=*&anrProjectReference_s=ANR-20-CE38-0001" class="dropdown-item">Publications</a>
</li>
                                    
<li>
    <a href="https://github.com/inria-emeraude/syfala" class="dropdown-item">SyFaLa Tool-Chain</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item">
                                <a href="../contacts/" class="nav-link">Contacts</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" class="nav-link disabled">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../results/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#overview-of-fast" class="nav-link">Overview of FAST</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#challenges-and-state-of-the-art" class="nav-link">Challenges and State of the Art</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#objectives" class="nav-link">Objectives</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#methods-and-approaches" class="nav-link">Methods and Approaches</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#impact-and-outcomes" class="nav-link">Impact and Outcomes</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#scientific-and-technical-challenges" class="nav-link">Scientific and Technical Challenges</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#perspectives" class="nav-link">Perspectives</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="overview-of-fast">Overview of FAST</h1>
<p>This section provides a general overiew of the FAST project. The main outcomes and results of FAST are presented in <a href="../results/">a dedicated page</a>. </p>
<h2 id="challenges-and-state-of-the-art">Challenges and State of the Art</h2>
<p>Despite the wide variety of available platforms, programmable systems for real-time digital audio signal processing are often limited by latency, computational power, and their ability to handle a large number of audio channels in parallel. Some application areas require exceptional performance in these aspects. Room acoustic active control, for instance, involves using a large number of speakers and microphones, executing complex algorithms in parallel, and achieving very low latencies on the order of tens of microseconds.</p>
<p>Field-Programmable Gate Arrays (FPGAs) are the only programmable platforms capable of delivering the performance required for such applications. However, programming them is extremely complex and requires specific skills that most audio signal processing engineers do not possess. High-Level Synthesis (HLS) offers a general solution to this problem by enabling FPGAs to be programmed using high-level languages such as C, C++, Python, etc. Still, for specific applications, HLS remains highly complex and therefore largely inaccessible.</p>
<p>Several projects have sought to make HLS more accessible in various fields such as image and video processing, control systems, and more. Audio, however, had never benefited from such effortsâ€”until the FAST project.</p>
<p>More broadly, it has been shown that Domain-Specific Languages (DSLs) can provide an effective way to make programming certain embedded platforms more accessible. Faust is a domain-specific programming language developed by one of the FAST partners. It aims to make the development of audio signal processing applications more accessible. Faust is used by a wide community of artists, hobbyists, and non-specialist engineers worldwide. More specifically, Faust supports programming a variety of embedded platforms such as microcontrollers, Digital Signal Processors (DSPs), and others.</p>
<p>Until the FAST project, however, Faust could not be used to program FPGAs. FPGAs operate very differently from other types of processors by providing access to "programmable logic." Efficient programming of FPGAs requires considering numerous factors such as parallelization, pipelining, use of fixed-point arithmetic, and more. As a result, creating a compilation toolchain from Faust to FPGAs is a complex task that had not been explored prior to FAST. Additionally, the use of programmable FPGA platforms for room acoustic active control had also seen very limited exploration before this project.</p>
<h2 id="objectives">Objectives</h2>
<p><img src="../img/overview.jpg" class="mx-auto d-block" width="70%"></p>
<p>The main objectives of the FAST project were:</p>
<ul>
<li>To make FPGA programming more accessible for real-time audio signal processing through the Faust programming language;</li>
<li>To develop an accessible and programmable platform for ultra-low-latency multichannel audio signal processing;</li>
<li>To explore the use of this platform for room acoustic active control applications.</li>
</ul>
<p>Two approaches were considered for building a compilation toolchain from Faust to FPGAs. The first involved adding an "VHDL backend" to Faust, allowing the generation of VHDL code directly from a Faust program. The second was based on using High-Level Synthesis (HLS), which required developing a dedicated Faust backend that generates optimized C++ code suitable for HLS.</p>
<p>In both approaches, the goal was to delegate to Faust the responsibility of distributing computations between the CPU and the FPGA available on the prototyping boards used (e.g., Digilent Zybo Z7 and Genesys), as well as managing memory usage (DDR). More broadly, it was essential to produce highly optimized code. To achieve this, several scientific and technical challenges had to be addressed, such as automating parallelization, pipelining, and fixed-point code generation â€” which is typically more efficient than floating-point code on FPGAs.</p>
<p>At the start of the project, we believed that fixed-point optimization would be the most critical factor for performance. However, it turned out that effective pipelining and parallelization had an even greater impact.</p>
<p>Before FAST, no open, programmable, FPGA-based hardware platform existed that could handle a large number of audio channels in parallel with sufficiently low latency for active room acoustic control applications. One of FAST's objectives was therefore to develop FPGA-based hardware boards that met these specifications. In parallel, the project also aimed to create a complete software suite to manage the entire system: real-time application control, compilation options, visualization of compilation results, and more.</p>
<p>Another objective of FAST was to use the hardware platforms developed during the project for applications involving active noise control and sound field control over extended spatial areas. This included implementing classic active control algorithms â€” such as feedback and feedforward (Fx-LMS) â€” in the Faust language and compiling them to run on the Zybo and Genesys platforms used at the core of the project.</p>
<h2 id="methods-and-approaches">Methods and Approaches</h2>
<p>FAST was organized into six work packages:</p>
<ol>
<li>Fixed-point computation in Faust</li>
<li>FPGA backends for Faust</li>
<li>Hardware platforms for audio processing</li>
<li>Audio signal processing module</li>
<li>Artificial reverberation</li>
<li>Spatial active noise control</li>
</ol>
<p>In Work Package 1, the goal was to enable Faust to generate fixed-point DSP code. This required investigating the feasibility of implementing an automatic signal format inference system within the Faust compiler. This work was carried out by Agathe Herrou during an 18-month postdoctoral position at GRAME. It laid the groundwork for such a mechanism, though it did not result in a fully functional system. As of now, the Faust compiler is still not capable of producing fixed-point code in a generalized way.</p>
<p>Work Package 2 focused on providing a functional compilation toolchain from Faust to FPGAs by AMD/Xilinx. As previously mentioned, two approaches were considered: one based on High-Level Synthesis (HLS), and another in which the Faust compiler directly generates VHDL code. The first approach allowed us to establish a complete compilation chain from Faust to FPGAs. This work was carried out by Maxime Popoff (PhD student at INSA). A prototype of a "Faust to VHDL" compiler was also developed as part of the second approach, but it currently has several limitations and is not yet usable for practical applications. This work was carried out by several successive interns at INSA. </p>
<p>In parallel with this, significant effort was devoted to developing HLS optimization techniques tailored to real-time audio signal processing applications. This work has been thoroughly documented and can lead to performance gains of up to tenfold in certain cases. Prior to the start of the FAST project, we had not fully appreciated the importance of this task.</p>
<p>Work Package 3 aimed to develop a series of external boards to adapt generic FPGA evaluation modules (Digilent Zybo Z7-10/20 and Genesys) for ultra-low-latency multichannel audio applications. This work was also carried out by Maxime Popoff. Overall, the objectives of this work package were fully achieved â€”and even exceeded.</p>
<p>Work Package 4 aimed to use the systems developed in the previous work packages for practical musical applications (e.g., synthesis or sound processing modules, etc.). To do this, it was necessary to implement tools for controlling the parameters of DSP programs running on the FPGAs. Hardware controllers were developed in this context, along with a software infrastructure that enables the use of standard control methods such as USB MIDI, Open Sound Control (OSC), web interfaces, etc., made possible through the use of an embedded Linux system. This work was carried out by Maxime Popoff and Pierre Cochard (engineer in the Emeraude team at INSA). Overall, the objectives of this work package were fully achieved â€” and even exceeded.</p>
<p>In Work Package 5, the objective was to deploy artificial reverberation algorithms based on impulse response convolution on the FPGA platform developed in the previous work packages. Several approaches were explored for this purpose. First, a modal approach, in which each resonance mode of a room is implemented using a second-order IIR filter (biquad). This type of algorithm is highly parallelizable and thus well suited for FPGAs. Second, a partitioned convolution approach, where the convolution operations can be "split" and therefore potentially pipelined and parallelized. Since the modal approach proved too destructive, we ultimately favored the partitioned convolution method, which is also more standard. The deployment of this type of inherently complex algorithm was greatly facilitated by Syfala. By the end of WP5, we were able to process a "dry" multichannel sound on an FPGA to produce virtual acoustic renderings. This work was primarily carried out by RÃ©mi Jeunehomme during an internship at GRAME. Although it has not yet led to concerts as initially planned in the FAST project proposal, GRAME is currently exploring the potential use of this technology in an upcoming artistic production.</p>
<p>In Work Package 6, spatial active noise control applications were explored. The initial goals aimed to enable real-time control of a sound zone (possibly mobile) in space. Classical multi-point active control algorithms (MP-FxLMS) as well as algorithms using sound field decomposition into spherical harmonics (SH-FxLMS) were to be evaluated. These goals were partially achieved using the technologies developed in FAST. A fixed zone was successfully controlled in real-time. However, the frequency range and size of the zone were limited by the computational power available at the time. This work was carried out by LoÃ¯c Alexandre as part of his doctoral thesis, under the supervision of Pierre Lecomte, Marie-Annick Galland, and Alain Berry.</p>
<h2 id="impact-and-outcomes">Impact and Outcomes</h2>
<p>Syfala is now being used outside the FAST project. Stanford University (USA) has set up a replica of the WFS system mentioned in the previous result. Maynooth University (Ireland) is using Syfala to prototype audio systems operating at high sampling rates. A Swiss company, Sonotrex, is using Syfala to implement active acoustic control systems. The Swedish public radio is using Syfala to prototype new low-latency mixing consoles. GRAME is expected to use the FAST technologies in several upcoming artistic projects. Additionally, a "Syfala" workshop, bringing together about fifteen participants, was held in December 2023 at INSA Lyon.</p>
<p>The work conducted in FAST led to the creation of a startup "Polyphonic" by Maxime Popoff (former FAST PhD student) focused on the technologies developed within the project. This startup is currently being funded by the Inria Startup Studio.</p>
<p>More broadly, FAST has contributed to the democratization of FPGA usage in the field of real-time audio signal processing.</p>
<h2 id="scientific-and-technical-challenges">Scientific and Technical Challenges</h2>
<p>Despite the significant work carried out in the FAST project, several scientific and technical challenges remain.</p>
<p>The first challenge is related to the management of fixed-point calculations in the Faust compiler, which did not progress enough during FAST to result in an operational system that can be generalized to all Faust programs. The production of fixed-point DSP code would improve efficiency, thus paving the way for more complex applications.</p>
<p>The optimization methods based on HLS discovered during FAST have not yet been incorporated into the Faust compiler, which makes the "Faust mode" of Syfala much less efficient than the C/C++ mode.</p>
<p>The general architecture of the Faust compiler is not necessarily well-suited for generating efficient code for HLS, which prevents the porting of optimization techniques developed in FAST. Significant work will continue in this direction after FAST.</p>
<p>The Faust-to-VHDL compiler prototype developed during FAST remains limited and is not generalizable to all Faust programs. Additionally, its mode of operation is still quite primitive and does not yet support pipelining or automatic parallelization, nor the management of external memory (DDR). Having an operational Faust-to-VHDL compiler could allow us to bypass proprietary HLS tools, which are essentially "black boxes" over which we have limited control.</p>
<p>Active control algorithms require multichannel filtering using convolutions, which can be very memory - and computation - intensive when the frequency band to be processed is large and the number of channels increases. This remains a bottleneck, as it has been difficult to process bands wider than just a few Hz with the hardware developed during the FAST project. Work on fast convolution algorithms (via Fourier transforms) is still needed to improve the current performance of the controllers provided by Syfala.</p>
<h2 id="perspectives">Perspectives</h2>
<p>Overall, the FAST project has opened up a large number of new research and development avenues, which we attempt to summarize in this section.</p>
<p>First, we aim to continue the development of Syfala, which aspires to become an essential tool for programming FPGAs for real-time audio signal processing applications. One of the first tasks in this direction is to port the HLS optimization techniques discovered in FAST to the Faust language so that it becomes a leading programming tool for such applications. In the absence of an efficient fixed-point management mode in Faust, an alternative solution could be to use the FloPoCo tool (<a href="https://flopoco.org/">https://flopoco.org/</a>), which implements optimized operators in C++ for FPGA.</p>
<p>During FAST, we realized the potential of using FPGAs in the context of sound field synthesis, sound spatialization, and setting up immersive virtual acoustics experiences. So far, we have only scratched the surface of these types of applications, which seem very promising, especially in the context of virtual reality. This is why we have recently submitted a new ANR project in this direction, combining FPGA usage with distributed computing approaches to set up systems for high-fidelity virtual acoustics. In parallel with this potential future project, and as mentioned in previous sections, Maxime Popoff (former FAST PhD student) has initiated a startup project aimed at developing applications for sound spatialization based on the technologies developed in FAST.</p>
<p>We also hope to continue working on more specific aspects, such as implementing Sigma-Delta ADCs or exploring the use of our system for active control of musical instruments.</p>
<p>For spatial active noise control aspects, the hardware that can be programmed via Syfala has shown very encouraging results, even comparable to what an expensive commercial controller can achieve. The ease of programming allows for the rapid deployment of a real-time solution. Current limitations in computational power require rethinking the perspectives toward smaller control zones, such as around the user's ears, for example. We will need to rethink the control signal calculation algorithms to make them as computationally efficient as possible.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
                <p>Copyright &copy; 2020 <a href="http://www.grame.fr">Grame-CNCM</a>, <a href="http://www.citi-lab.fr/">CITI Lab</a> & <a href="http://lmfa.ec-lyon.fr/?lang=en">LMFA</a></p>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js"></script>
        <script src="../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
